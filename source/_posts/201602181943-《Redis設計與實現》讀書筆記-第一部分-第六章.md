title: 《Redis設計與實現》讀書筆記-第一部分-第六章
date: 2016-02-18 19:43:25
categories: 技術
tags: 
- Redis
---
> 整數集合，集合鍵的底層實現
> 數據結構:intset

<!--more-->

### 數據結構：
<img src="/images/Redis/2016-02-18_0001.jpg"  />

### 實現：
content 數組底層實現
類型由encoding決定16、32、64位
可根據新增元素類型自由升級，但不能降級
1、根據新元素類型，擴展整型集合底層數組空間大小，為新元素分配空間
2、將底層數組元素類型轉變為新類型，重新放置到對應的數組位置中,并按照原有次序
　位數 * length 計算出元素在數組中的位置
3、將新元素添加到底層數組中

### 總結：
<img src="/images/Redis/2016-02-18_0002.jpg"  />

